<!DOCTYPE html>
<html lang="en">
<head>
   <meta charset="UTF-8">
   <meta http-equiv="X-UA-Compatible" content="IE=edge">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <!-- Google fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Kumbh+Sans:wght@400;700&display=swap" rel="stylesheet">
   <link rel="stylesheet" href="/public/styles.css">
   <link rel="stylesheet" href="/public/vouchers.css">

</head>
<body>
    <!-- navbar -->
    <% if (loggedIn) { %>
      <%- include ('navbar_logged') %>
    <% } else { %>
      <%- include ('navbar') %>
    <% } %>

   <h1>EXPLORE OUR RANGE OF VOUCHERS ADDED BY THE COMMUNITY</h1>

   <div class="filter-menu">
      <div class="filter-option">
          <label for="saving-filter" id="filter-txt">Saving:</label>
          <select id="saving-filter">
              <option value="">All</option>
              <option value="saving1">0</option>
              <option value="saving2">15</option>
              <option value="saving3">20</option>
              <option value="saving3">25</option>
              <option value="saving3">30</option>
              <option value="saving3">50</option>
          </select>
      </div>
      <div class="filter-option">
          <label for="category-filter" id="filter-txt">Category:</label>
          <select id="category-filter">
              <option value="">All</option>
              <option value="category1">Eating out</option>
              <option value="category2">Entertainment</option>
              <option value="category3">Groceries</option>
          </select>
      </div>
      <button class="filter-button" onclick="applyFilter()">Filter</button>
  </div>

  <% voucherData.forEach((voucher) => { %>
   <div class="voucher" data-voucher-id="<%= voucher.id %>">
     <div class="v_container">
       <h3><%= voucher.company %></h3>
     </div>
     <img src="<%= voucher.image %>" alt="" style="width:100%;">
     <div class="v_container" style="background-color:white">
       <h2><b><%= voucher.saving %> % OFF</b></h2>
       <p><%= voucher.text %></p>
       <p>Check out <a href="<%= voucher.link %>" style="color:dodgerblue" target="_blank" rel="noopener noreferrer" class="shop_link"><%= voucher.company %></a>.</p>
     </div>
     <div class="container">
       <p class="code">Use Promo Code: <span class="promo"><%= voucher.code %></span></p>
     </div>
     <div class="save-btn-container">
      <% if (loggedIn) { %>
         <button class="v-save-btn" onclick="saveVoucher('<%= voucher.id %>')">SAVE VOUCHER</button>
       <% } else { %>
         <a href="/login" class="v-log-save-btn">LOG IN TO SAVE</a>
       <% } %>
     </div>
   </div>
 <% }) %>
 

<!-- js  -->
<script>

let searchBox = document.querySelector('#search-box');
let images = document.querySelectorAll('.container .image-container .image');

searchBox.oninput = () =>{
   images.forEach(hide => hide.style.display = 'none');
   let value = searchBox.value;
   images.forEach(filter =>{
      let title = filter.getAttribute('data-title');
      if(value == title){
         filter.style.display = 'block';
      }
      if(searchBox.value == ''){
         filter.style.display = 'block';
      }
   });
};

</script>

<!-- footer -->
<%- include ('footer') %>
</body>
</html>