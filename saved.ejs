<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Saved Deals and Vouchers</title>
    <link rel="stylesheet" href="/public/styles.css">
    <link rel="stylesheet" href="/public/saved.css">
</head>
<body class="saved_body">
    <!-- navbar -->
    <%- include ('navbar_logged') %>

    <h1 class="saved_header">View all your saved Deals and Vouchers</h1>
    <div id="saved_deals_container"></div>
    <div id="saved_vouchers_container"></div>

    <script>
        // Client-Side: Fetch and Display Saved Deals
        function fetchAndDisplaySavedDeals() {
            fetch('/get_saved_deals')
            .then((response) => response.json())
            .then((savedDeals) => {
                // Loop through savedDeals and render them in the template
                const savedDealsContainer = document.getElementById('saved_deals_container');
                savedDeals.forEach((deal) => {
                    const dealElement = document.createElement('div');
                    dealElement.classList.add('deal-container');
                    savedDealsContainer.appendChild(dealElement);
                });
            })
            .catch((error) => {
                console.error('Failed to fetch saved deals:', error);
            });
        }

    </script>

<script>
    // Client-Side: Fetch and Display Saved Vouchers
    function fetchAndDisplaySavedVouchers() {
        fetch('/get_saved_vouchers')
        .then((response) => response.json())
        .then((savedVouchers) => {
            // Loop through savedVouchers and render them in the template
            const savedVouchersContainer = document.getElementById('saved_vouchers_container');
            savedVouchers.forEach((deal) => {
                const voucherElement = document.createElement('div');
                voucherElement.classList.add('voucher');
                savedVouchersContainer.appendChild(voucherElement);
            });
        })
        .catch((error) => {
            console.error('Failed to fetch saved vouchers:', error);
        });
    }

</script>

    <!-- footer -->
    <%- include ('footer') %>
</body>
</html>